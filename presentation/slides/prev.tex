\section{Prevention}

%------------------------------------------------
\subsection{Different moments}

%------------------------------------------------
\begin{frame}
\frametitle{Different moments}

\begin{itemize}
\item Architecture
\item Development
\item Maintenance
\end{itemize}
\note{
Preventing security flaws is something that has to be done during the
whole life cycle of the application.
}
\end{frame}

%------------------------------------------------
\begin{frame}
\frametitle{Architecture}
% TODO: ajouter une image du livre?
\begin{quote}
\begin{small}
The {\Large highest-level breakdown} of a system into its parts; the decisions that are
{\Large hard to change}; there are multiple architectures in a system; what is
architecturally significant can change over a system's lifetime; and, in the
end, architecture boils down to whatever the {\Large important stuff} is.
\newline \textit{-- Martin Fowler, Patterns of Enterprise Application Architecture}
\end{small}
\end{quote}
\note{
Definition of \emph{architecture}.
}
\end{frame}

\begin{frame}
\frametitle{Security design\ldots}
\includeimage[width=0.7\linewidth,height=0.7\textheight]{useless-barrier}
\note{
\begin{itemize}
\item Security has to be taken into account from the beginning.
	\newline
	Retrofitting security in an unsecure application is much more difficult
	than conceiving it securely from the start.
\item You have to ask yourself the good questions and those questions vary
	from one application to the other
\item Know the threats you are facing
\item There is no miracle receipt... just guidelines
\end{itemize}
Question examples:
\begin{itemize}
\item Who are the end-users?
\item In what environment will the application run?
\item Who has access to the data?
\item Are there other systems that access data? What are the rules?
\end{itemize}
% Source:
% https://www.owasp.org/index.php/Application_Security_Architecture_Cheat_Sheet}
}
\end{frame}

%------------------------------------------------
\begin{frame}
\frametitle{Development: tips and tricks}
\begin{itemize}
\item<+-> Passwords
\item<+-> Session management
\item<+-> Input validation
\item<+-> Ad hoc protection
\end{itemize}
\note{
There are lots of best practices that can make your application more
secure.
\begin{itemize}
\item Passwords: enforcing a minimum complexity policy, storing them securely,
having the user rotate them, preventing brute-force by implementing temporary
lock-out, ...
\item Session management: setting an inactivity time out, setting the
\emph{secure} flag for sensitive cookies, implementing an easily accessible logout, ...
\item Input validation: always on server side, use a positive
  approach
\item Use ad-hoc protection for known attacks. Ad-hoc protection means a
protection specialized for a particular attack in this context.
\end{itemize}
}
\end{frame}

%------------------------------------------------
\begin{frame}
%TODO : changer le logo
\frametitle{Secure development cycle}
\includeimage[width=0.7\linewidth,height=0.7\textheight]{development-cycle}
\note{
A secure development cycle should set aside some time for:
\begin{itemize}
\item Code review {\small (security oriented and general)}
\item Pentesting
\item Security training of the developers
\item Sensitizing business owners to security trade-offs
\item Choosing a secure and well maintained framework
	%(more on frameworks later)
\item Devising a secure configuration for deployment
\end{itemize}
}
\end{frame}
%------------------------------------------------

\subsection{Penetration testing}

\begin{frame}
\frametitle{Penetration testing}
\includeimage[width=0.7\linewidth,height=0.7\textheight]{pentesting}
\note{
\textbf{Penetration testing} (or pentesting) is the action of attacking a
system with the consent of the owner in the goal of finding security holes.
\begin{itemize}
\item Identifying vulnerabilities
\item Exploit vulnerabilities
\item Testing ability to detect and respond to an attack
\item Social engineering
\end{itemize}
}
\end{frame}

\begin{frame}
\frametitle{Tools - Vulnerabilities detector}
\begin{columns}
\begin{column}{0.55\linewidth}
\begin{figure}
\includeimage[width=0.8\linewidth]{logo-metasploit}
{\scriptsize \url{http://www.metasploit.com/}}
\end{figure}
\end{column}
\begin{column}{0.45\linewidth}
\begin{figure}
\includeimage[width=0.8\linewidth]{logo-nessus}
{\scriptsize \url{http://www.tenable.com/}}
\end{figure}
\end{column}
\end{columns}
\note{
\begin{itemize}
\item \href{http://www.metasploit.com/about/penetration-testing-basics/}{Metasploit}:
	identifies vulnerabilities, automates assessments; attack a host
\item \href{http://www.tenable.com/products/nessus}{Nessus}:
	vulnerability scanner
\end{itemize}
}
\end{frame}

\begin{frame}
\frametitle{Tools - Network}
\begin{columns}
\begin{column}{0.5\linewidth}
\begin{figure}
\includeimage[width=0.8\linewidth]{logo-nmap}
NMAP
\newline {\scriptsize \url{http://nmap.org/}}
\end{figure}
\end{column}
\begin{column}{0.5\linewidth}
\begin{figure}
\includeimage[width=0.8\linewidth]{logo-webscarab}
WebScarab
\newline {\scriptsize \url{https://www.owasp.org/}}
\end{figure}
\end{column}
\end{columns}
\note{
\begin{itemize}
\item \href{http://nmap.org/}{nmap}:
	port scanning
\item \href{https://www.owasp.org/index.php/Webscarab}{WebScarab}:
	intercepting proxy
\end{itemize}
}
\end{frame}

\begin{frame}
\frametitle{Tools - All in one}

\includeimage[width=\linewidth,height=0.6\textheight]{bt5-screenshot}
\begin{center}
BackTrack
\newline {\scriptsize \url{http://www.backtrack-linux.org/}}
\end{center}
\note{
\href{http://www.backtrack-linux.org/}{BackTrack}:
	Linux distribution
}
\end{frame}

%------------------------------------------------
\begin{frame}
\frametitle{Maintenance}
\includeimage[width=0.7\linewidth,height=0.7\textheight]{patched}
\note{
\begin{block}{Patching}
When vulnerabilities have been discovered they have to be patched as soon as
possible.
Beware of regressions and new security breaches.
\end{block}
}
\end{frame}

%------------------------------------------------
\subsection{Using frameworks}

%------------------------------------------------
\begin{frame}
\frametitle{Frameworks}
\begin{quote}
\begin{center}
\LARGE
Your application is not the first.
\end{center}
\end{quote}
\note{
Frameworks ease development while providing security mechanisms:
\begin{itemize}
\item Authentication support
\item Escaping of values
\item Standard input validation
\end{itemize}
\begin{block}{Disadvantages}
\begin{itemize}
\item Changing a framework may prove difficult
\item Bug in a framework is known
	(version management needed)
\end{itemize}
\end{block}
}
\end{frame}

%------------------------------------------------
\begin{frame}
\frametitle{Frameworks - examples}

% TODO mettre une image avec plein de frameworks ESAPI, supprimer Spring

\begin{columns}
\begin{column}{0.55\linewidth}
\begin{figure}
\includeimage[width=0.8\linewidth]{logo-spring}
\scriptsize{\url{http://www.springsource.org/}}
\end{figure}
\begin{figure}
\includeimage[width=0.8\linewidth]{apache-shiro}
\scriptsize{\url{https://shiro.apache.org/}}
\end{figure}
\end{column}
\begin{column}{0.45\linewidth}
\begin{figure}
\includeimage[width=0.8\linewidth]{logo-esapi}
ESAPI
\newline \scriptsize{\url{https://www.owasp.org/}}
\end{figure}
\begin{figure}
\includeimage[width=0.8\linewidth]{dotnet-logo}
\scriptsize{\url{https://www.microsoft.com/net}}
\end{figure}
\end{column}
\end{columns}
\note{
\begin{exampleblock}{Spring}
Spring is one of the most used framework for developing web application using
Java. It does feature many components including some dedicated to security.
\end{exampleblock}
\begin{exampleblock}{ESAPI}
The OWASP Enterprise Security API is a free, open source, web application
security control library that is designed to make it easier for programmers
to retrofit security into existing applications.
The ESAPI libraries also serve as a solid foundation for new development.
\end{exampleblock}
}
\end{frame}

%------------------------------------------------
\subsection{Security in application servers}

%------------------------------------------------
\begin{frame}
\frametitle{Security in application servers}
\begin{block}{Application server}
The program that runs the web application
\end{block}
\vspace{1em}
\begin{itemize}
\item Authentication management
\item Directory listing disabling
\item User session management
\item Error handling
\item Input encoding
\end{itemize}
\note{
Application servers offer various services that can help you configure
web applications.
\begin{itemize}
\item Authentication management
\item Directory listing disabling
\item User session management
\item Error handling
\item Input encoding
\end{itemize}
}
\end{frame}

%------------------------------------------------
\subsection{Application Firewall}

%------------------------------------------------
\begin{frame}
\frametitle{Web Application Firewall}
\includeimage[width=0.7\linewidth,height=0.7\textheight]{firewall}
\note{
\textbf{Web Application Firewall} (WAF) are filters which inspects the traffic
that goes in and out your application and are able to block inappropriate
content.
\begin{block}{Virtual Patching}
Virtual Patching is a security policy layer that prevents the exploitation of a known
vulnerability until a patch is released. It does so by filtering the
traffic that goes to and from the application server and blocking
requests that are exploits.
\end{block}
}
\end{frame}

%------------------------------------------------
\subsection{HTTPS}

%------------------------------------------------
\begin{frame}
\frametitle{Secure protocols}
\includeimage[width=0.5\linewidth]{https}
\begin{columns}
\begin{column}{0.5\linewidth}
\centering\Huge\bfseries
SSL
\end{column}
\begin{column}{0.5\linewidth}
\centering\Huge\bfseries
TLS
\end{column}
\end{columns}
\note{
\textbf{TLS} (Transport Layer Security) is the successor of \textbf{SSL}
(Secured Socket Layer).
Equal in terms of security.
\begin{block}{What provides HTTPS?}
HTTPS provides \emph{encryption} and \emph{authentication} for HTTP.
\newline Protects against eavesdropping and spoofing.
\end{block}
\vspace{1em}
HTTPS is a part of a solution, it does not ensure full security.
\begin{block}{SSL vs TLS}
TLS is an open-community standard and allows both secure and unsecure
communications.
\newline TSL~1.0 is equivalent to SSL~3.1
\end{block}
}
\end{frame}

%------------------------------------------------
\subsection{Browser restrictions}

%------------------------------------------------
\begin{frame}
% TODO Image
% * Ne pas descendre Flash dans les explications ("il faut etre a jour")
% * "Javascript" => "JavaScript"
% * Ajouter le sandbox
% voir les notes du slide
\frametitle{Browser restrictions}
\includeimage[width=0.9\linewidth,height=0.9\textheight]{browser-security2}
\note{
\begin{itemize}
\item Cross-domain XMLHttpRequest (XHR) is disabled by default for other websites
	\\ Exceptions defined using \texttt{Access-Control}
\item Possibility of disabling JavaScript and plug-ins (Flash)
\item Private navigation mode
	\\ Does not store data on the disk.
\item Cookies access is limited by
	\begin{itemize}
	\item URL
	\item Timestamp
	\item Flags (Secure, HTTP-Only)
	\end{itemize}
\item SSL Certificates are validated
\item Blacklists of known rogue sites
\end{itemize}
}
\end{frame}

%------------------------------------------------
\subsection{E-mail}
%------------------------------------------------
\begin{frame}
\frametitle{E-mail}
\includeimage[width=0.7\linewidth,height=0.7\textheight]{spam}
\note{
E-mail is one of the most used application.
And it's plagued by spam and spoofing. But solutions exists:

\begin{block}{Sender Policy Framework (SPF)}
SPF validates e-mails by verifying sender's IP address against DNS records.
Administrators can define allowed hosts.
\end{block}

\begin{block}{Domain Keys Identified Mail (DKIM)}
DKIM associates domain names and email messages using a digital signature
added to the header of messages, a public key is added to the DNS record of the
domain for the recipient to read the message's header.
\end{block}
}
\end{frame}

%------------------------------------------------
\subsection{Variety of environments}

%------------------------------------------------
\begin{frame}
\frametitle{Variety of environments}
\includeimage[width=0.8\linewidth,height=0.8\textheight]{various-environments}
\note{
\begin{itemize}
\item Servers {\small (and their configuration)}
\item Networks
\item Clients
	\begin{itemize}
	\item Browsers
		\\ hacks {\small (example: IE6)} are just more code to test
	\item Mobile
	\item M2M
	\end{itemize}
\item Networks: proxy, caches, etc.
\item M2M: Machine to Machine
\end{itemize}
}
\end{frame}

